[
  {
    "objectID": "HW3_Output.html",
    "href": "HW3_Output.html",
    "title": "HW3_Output",
    "section": "",
    "text": "Task 0: Set up the environment\n\nload(\"hw2_list.rda\")\n\nbp_list\n\n$treatment\n              patient pre_bp post_bp diff_bp normal\nSubject_1   Subject_1    120     127      -7  FALSE\nSubject_2   Subject_2    151     145       6  FALSE\nSubject_3   Subject_3    125     135     -10  FALSE\nSubject_4   Subject_4    126     122       4  FALSE\nSubject_5   Subject_5    115     115       0   TRUE\nSubject_6   Subject_6    132     122      10  FALSE\nSubject_7   Subject_7    132     123       9  FALSE\nSubject_8   Subject_8    129     126       3  FALSE\nSubject_9   Subject_9    134     126       8  FALSE\nSubject_10 Subject_10    139     129      10  FALSE\nSubject_11 Subject_11    127     132      -5  FALSE\nSubject_12 Subject_12    122     146     -24  FALSE\nSubject_13 Subject_13    127     120       7  FALSE\nSubject_14 Subject_14    135     114      21   TRUE\nSubject_15 Subject_15    133     121      12  FALSE\nSubject_16 Subject_16    128     120       8  FALSE\nSubject_17 Subject_17    147     128      19  FALSE\nSubject_18 Subject_18    138     120      18  FALSE\nSubject_19 Subject_19    140     133       7  FALSE\nSubject_20 Subject_20    132     115      17   TRUE\n\n$placebo\n      patient pre_bp post_bp diff_bp normal\n1   Subject_1    138     105      33   TRUE\n2   Subject_2    135     136      -1  FALSE\n3   Subject_3    147     123      24  FALSE\n4   Subject_4    117     130     -13  FALSE\n5   Subject_5    152     134      18  FALSE\n6   Subject_6    134     143      -9  FALSE\n7   Subject_7    114     135     -21  FALSE\n8   Subject_8    121     139     -18  FALSE\n9   Subject_9    131     120      11  FALSE\n10 Subject_10    130     124       6  FALSE\n\n\n\n\nTask 1: Control Flow Practice\nCreate status column:\n\nbp_list$treatment$status &lt;- character (20)\nbp_list$placebo$status &lt;- character (10)\n\nbp_list\n\n$treatment\n              patient pre_bp post_bp diff_bp normal status\nSubject_1   Subject_1    120     127      -7  FALSE       \nSubject_2   Subject_2    151     145       6  FALSE       \nSubject_3   Subject_3    125     135     -10  FALSE       \nSubject_4   Subject_4    126     122       4  FALSE       \nSubject_5   Subject_5    115     115       0   TRUE       \nSubject_6   Subject_6    132     122      10  FALSE       \nSubject_7   Subject_7    132     123       9  FALSE       \nSubject_8   Subject_8    129     126       3  FALSE       \nSubject_9   Subject_9    134     126       8  FALSE       \nSubject_10 Subject_10    139     129      10  FALSE       \nSubject_11 Subject_11    127     132      -5  FALSE       \nSubject_12 Subject_12    122     146     -24  FALSE       \nSubject_13 Subject_13    127     120       7  FALSE       \nSubject_14 Subject_14    135     114      21   TRUE       \nSubject_15 Subject_15    133     121      12  FALSE       \nSubject_16 Subject_16    128     120       8  FALSE       \nSubject_17 Subject_17    147     128      19  FALSE       \nSubject_18 Subject_18    138     120      18  FALSE       \nSubject_19 Subject_19    140     133       7  FALSE       \nSubject_20 Subject_20    132     115      17   TRUE       \n\n$placebo\n      patient pre_bp post_bp diff_bp normal status\n1   Subject_1    138     105      33   TRUE       \n2   Subject_2    135     136      -1  FALSE       \n3   Subject_3    147     123      24  FALSE       \n4   Subject_4    117     130     -13  FALSE       \n5   Subject_5    152     134      18  FALSE       \n6   Subject_6    134     143      -9  FALSE       \n7   Subject_7    114     135     -21  FALSE       \n8   Subject_8    121     139     -18  FALSE       \n9   Subject_9    131     120      11  FALSE       \n10 Subject_10    130     124       6  FALSE       \n\n\nFill in values of status column for placebo df:\n\nfor (i in 1:10){\n  if(bp_list$placebo[i,\"post_bp\"] &lt;= 120) {\n    bp_list$placebo[i, \"status\"] &lt;- \"optimal\"\n  } else if(bp_list$placebo[i,\"post_bp\"] &lt;= 130) {\n    bp_list$placebo[i, \"status\"] &lt;- \"borderline\"\n  } else if(bp_list$placebo[i,\"post_bp\"] &gt; 130){\n    bp_list$placebo[i, \"status\"] &lt;- \"high\"\n  } else {\n    bp_list$placebo[i, \"status\"] &lt;- NULL\n  }\n}\n\nbp_list$placebo\n\n      patient pre_bp post_bp diff_bp normal     status\n1   Subject_1    138     105      33   TRUE    optimal\n2   Subject_2    135     136      -1  FALSE       high\n3   Subject_3    147     123      24  FALSE borderline\n4   Subject_4    117     130     -13  FALSE borderline\n5   Subject_5    152     134      18  FALSE       high\n6   Subject_6    134     143      -9  FALSE       high\n7   Subject_7    114     135     -21  FALSE       high\n8   Subject_8    121     139     -18  FALSE       high\n9   Subject_9    131     120      11  FALSE    optimal\n10 Subject_10    130     124       6  FALSE borderline\n\n\nFill in values of status column for treatment df:\n\nfor (i in 1:20){\n  if(bp_list$treatment[i,\"post_bp\"] &lt;= 120) {\n    bp_list$treatment[i, \"status\"] &lt;- \"optimal\"\n  } else if(bp_list$treatment[i,\"post_bp\"] &lt;= 130) {\n    bp_list$treatment[i, \"status\"] &lt;- \"borderline\"\n  } else if(bp_list$treatment[i,\"post_bp\"] &gt; 130){\n    bp_list$treatment[i, \"status\"] &lt;- \"high\"\n  } else {\n    bp_list$treatment[i, \"status\"] &lt;- NULL\n  }\n}\n\nbp_list$treatment\n\n              patient pre_bp post_bp diff_bp normal     status\nSubject_1   Subject_1    120     127      -7  FALSE borderline\nSubject_2   Subject_2    151     145       6  FALSE       high\nSubject_3   Subject_3    125     135     -10  FALSE       high\nSubject_4   Subject_4    126     122       4  FALSE borderline\nSubject_5   Subject_5    115     115       0   TRUE    optimal\nSubject_6   Subject_6    132     122      10  FALSE borderline\nSubject_7   Subject_7    132     123       9  FALSE borderline\nSubject_8   Subject_8    129     126       3  FALSE borderline\nSubject_9   Subject_9    134     126       8  FALSE borderline\nSubject_10 Subject_10    139     129      10  FALSE borderline\nSubject_11 Subject_11    127     132      -5  FALSE       high\nSubject_12 Subject_12    122     146     -24  FALSE       high\nSubject_13 Subject_13    127     120       7  FALSE    optimal\nSubject_14 Subject_14    135     114      21   TRUE    optimal\nSubject_15 Subject_15    133     121      12  FALSE borderline\nSubject_16 Subject_16    128     120       8  FALSE    optimal\nSubject_17 Subject_17    147     128      19  FALSE borderline\nSubject_18 Subject_18    138     120      18  FALSE    optimal\nSubject_19 Subject_19    140     133       7  FALSE       high\nSubject_20 Subject_20    132     115      17   TRUE    optimal\n\n\n\n\nTask 2: Function Writing\nWrite a function to calculate stats for list of two dataframes:\n\ncalc_stat &lt;- function (df_list, r_fn=\"mean\"){\n  # pull stat function\n  my_fun &lt;- get(r_fn)\n  \n  # generate vector containing stats\n  stat_vector &lt;- c(my_fun(df_list[[1]][, \"pre_bp\"]),\n                 my_fun(df_list[[1]][, \"post_bp\"]),\n                 my_fun(df_list[[1]][, \"diff_bp\"]))\n\n  stat_vector[4:6] &lt;- c(my_fun(df_list[[2]][, \"pre_bp\"]),\n                      my_fun(df_list[[2]][, \"post_bp\"]),\n                      my_fun(df_list[[2]][, \"diff_bp\"]))\n\n  # generate names for stats vector\n  name_vector &lt;- vector()\n  \n  for (df_name in c(\"treatment\", \"placebo\")){\n    name_vector[(length(name_vector)+1):(length(name_vector)+3)] &lt;- c(paste(df_name, c(\"pre\", \"post\", \"diff\"), r_fn, sep=\"_\"))\n  }\n  \n  # add names to stats vector\n  names(stat_vector) &lt;- name_vector\n\n  return(stat_vector)\n}\n\nCall the function we created without stat specified:\n\nfn_output &lt;- calc_stat(bp_list)\n\nfn_output\n\n treatment_pre_mean treatment_post_mean treatment_diff_mean    placebo_pre_mean \n             131.60              125.95                5.65              131.90 \n  placebo_post_mean   placebo_diff_mean \n             128.90                3.00 \n\n\nCall the function with var, sd, min, and max:\n\n# initialize list to store outputs, save name vector of all the stats\noutput_list &lt;- list('var'=vector(), 'sd'=vector(), 'min'=vector(), 'max'=vector())\nstat_names = c('var', 'sd', 'min', 'max')\n\n# loop through the different stats, call the fn, and store the returned value\nfor (stat_num in 1:length(stat_names)){\n  output_list[[stat_num]] &lt;- calc_stat(bp_list, stat_names[stat_num])\n}\n\noutput_list\n\n$var\n treatment_pre_var treatment_post_var treatment_diff_var    placebo_pre_var \n          75.72632           78.99737          117.81842          149.87778 \n  placebo_post_var   placebo_diff_var \n         124.98889          341.33333 \n\n$sd\n treatment_pre_sd treatment_post_sd treatment_diff_sd    placebo_pre_sd \n         8.702087          8.888046         10.854419         12.242458 \n  placebo_post_sd   placebo_diff_sd \n        11.179843         18.475209 \n\n$min\n treatment_pre_min treatment_post_min treatment_diff_min    placebo_pre_min \n               115                114                -24                114 \n  placebo_post_min   placebo_diff_min \n               105                -21 \n\n$max\n treatment_pre_max treatment_post_max treatment_diff_max    placebo_pre_max \n               151                146                 21                152 \n  placebo_post_max   placebo_diff_max \n               143                 33"
  }
]